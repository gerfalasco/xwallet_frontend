{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@cb/core/services/customer.service\";\nimport * as i3 from \"src/app/shared/components/modal\";\nimport * as i4 from \"src/app/shared/dialogo/services/dialog-service.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction IngresoModificacionComponent_li_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18)(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function IngresoModificacionComponent_li_35_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.closeForm();\n    });\n    i0.ɵɵtext(2, \" Cerrar \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction IngresoModificacionComponent_li_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18)(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function IngresoModificacionComponent_li_36_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.closeForm();\n    });\n    i0.ɵɵtext(2, \" Cancelar \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction IngresoModificacionComponent_li_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 18)(1, \"button\", 20);\n    i0.ɵɵtext(2, \"Guardar\");\n    i0.ɵɵelementEnd()();\n  }\n}\n/**\r\n * Estados posibles de la pantalla:\r\n * 0 -> Alta,\r\n * 1 -> Modificacion,\r\n * 2 -> Detalle\r\n **/\n\n\nexport var Estado = /*#__PURE__*/(() => {\n  (function (Estado) {\n    Estado[Estado[\"Alta\"] = 0] = \"Alta\";\n    Estado[Estado[\"Modificacion\"] = 1] = \"Modificacion\";\n    Estado[Estado[\"Detalle\"] = 2] = \"Detalle\";\n  })(Estado || (Estado = {}));\n\n  return Estado;\n})();\nexport let IngresoModificacionComponent = /*#__PURE__*/(() => {\n  class IngresoModificacionComponent {\n    constructor(fb, customerService, modalActivoRef, dialogService) {\n      this.fb = fb;\n      this.customerService = customerService;\n      this.modalActivoRef = modalActivoRef;\n      this.dialogService = dialogService;\n      this.estado = Estado.Detalle;\n      this.titulo = '';\n      this.grupoCustomer = this.fb.group({\n        customerId: [],\n        customerName: [''],\n        customerPhone: [''],\n        customerEmail: [''],\n        customerAddress: [''],\n        customerCity: ['']\n      });\n    }\n\n    ngOnInit() {\n      if (this.estado !== Estado.Alta) {\n        this.cargarPantalla();\n\n        if (this.estado === Estado.Detalle) {\n          this.grupoCustomer.disable();\n        }\n      } // this.customerService.getCustomer().subscribe((customer: ICustomer) => {\n      //   this.customer = customer;\n      //   this.grupoCustomer.patchValue(this.customer);\n      // });\n\n    }\n\n    onSubmit() {\n      if (this.grupoCustomer.valid) {\n        this.customer = this.grupoCustomer.value;\n\n        if (this.estado === Estado.Alta) {\n          this.customerService.setCustomer({\n            customer: this.customer\n          }).subscribe({\n            next: customer => {\n              console.log(customer);\n              this.closeForm();\n              const dialogConfig = {\n                title: 'Cliente creado',\n                message: 'El cliente se ha creado correctamente',\n                tipo: 'exito',\n                confirmText: 'Aceptar',\n                cancelText: undefined\n              };\n              this.dialogService.open(dialogConfig);\n            },\n            error: error => {\n              console.log(error);\n            }\n          });\n        } else {\n          let dialogConfig = {\n            title: 'Modificar cliente',\n            message: '¿Está seguro que desea modificar el cliente seleccionado?',\n            tipo: 'advertencia',\n            confirmText: 'Aceptar',\n            cancelText: 'Cancelar'\n          };\n          this.dialogService.open(dialogConfig).then(aceptar => {\n            this.customerService.updateCustomer({\n              customer: this.customer\n            }).subscribe({\n              next: customer => {\n                console.log(customer);\n                this.closeForm();\n                dialogConfig = {\n                  title: 'Cliente modificado',\n                  message: 'El cliente se ha modificado correctamente',\n                  tipo: 'exito',\n                  confirmText: 'Aceptar',\n                  cancelText: undefined\n                };\n                this.dialogService.open(dialogConfig);\n              },\n              error: error => {\n                console.log(error);\n              }\n            });\n          });\n        }\n      }\n    }\n\n    cargarPantalla() {\n      if (this.customer) {\n        this.grupoCustomer.patchValue(this.customer);\n      }\n    } //Cierro el modal\n\n\n    closeForm() {\n      this.customer = null;\n      this.modalActivoRef.cerrar();\n    }\n\n  }\n\n  IngresoModificacionComponent.ɵfac = function IngresoModificacionComponent_Factory(t) {\n    return new (t || IngresoModificacionComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.CustomerService), i0.ɵɵdirectiveInject(i3.ModalActivoRef), i0.ɵɵdirectiveInject(i4.DialogService));\n  };\n\n  IngresoModificacionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IngresoModificacionComponent,\n    selectors: [[\"cb-ingreso-modificacion\"]],\n    decls: 38,\n    vars: 6,\n    consts: [[1, \"cb-main\", 3, \"formGroup\", \"ngSubmit\"], [1, \"cb-header\"], [1, \"cb-btn__icon\", \"cb-icon\", \"cb-header__title\", 2, \"margin-right\", \"0.5rem\", 3, \"ngClass\"], [1, \"cb-header__title\", 2, \"width\", \"100%\", \"text-wrap\", \"nowrap\", \"margin-top\", \"0.1rem\"], [1, \"cb-section\", \"cb-section--form\", \"cb-form\", 2, \"display\", \"flex\", \"flex-direction\", \"column\", \"row-gap\", \"8px\"], [1, \"cb-form__section\", \"form-section\"], [1, \"form-section__content\", 2, \"display\", \"flex\", \"flex-direction\", \"row\", \"flex-wrap\", \"wrap\"], [1, \"cb-form-field\", \"cb-form-field--inline\"], [1, \"cb-form-field__label\"], [\"type\", \"text\", \"formControlName\", \"customerName\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"customerEmail\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"customerPhone\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"customerCity\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"customerAddress\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [1, \"cb-footer\", \"cb-footer--sticky\"], [1, \"cb-footer__toolbar\", \"cb-toolbar\"], [1, \"cb-toolbar__content-fixed\"], [\"class\", \"cb-toolbar__option\", 4, \"ngIf\"], [1, \"cb-toolbar__option\"], [\"type\", \"button\", 1, \"btn\", \"cb-btn\", \"cb-btn--secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"cb-btn\"]],\n    template: function IngresoModificacionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function IngresoModificacionComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(1, \"header\", 1);\n        i0.ɵɵelement(2, \"i\", 2);\n        i0.ɵɵelementStart(3, \"h1\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"section\", 4)(6, \"fieldset\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"label\", 8);\n        i0.ɵɵtext(10, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"div\", 7)(14, \"label\", 8);\n        i0.ɵɵtext(15, \"Mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"div\", 7)(19, \"label\", 8);\n        i0.ɵɵtext(20, \"Tel\\u00E9fono\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 6)(23, \"div\", 7)(24, \"label\", 8);\n        i0.ɵɵtext(25, \"Ciudad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"input\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"div\", 6)(28, \"div\", 7)(29, \"label\", 8);\n        i0.ɵɵtext(30, \"Direcci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"input\", 13);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(32, \"footer\", 14)(33, \"div\", 15)(34, \"div\", 16);\n        i0.ɵɵtemplate(35, IngresoModificacionComponent_li_35_Template, 3, 0, \"li\", 17);\n        i0.ɵɵtemplate(36, IngresoModificacionComponent_li_36_Template, 3, 0, \"li\", 17);\n        i0.ɵɵtemplate(37, IngresoModificacionComponent_li_37_Template, 3, 0, \"li\", 17);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.grupoCustomer);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.estado === 2 ? \"cb-icon--info\" : ctx.estado === 1 ? \"cb-icon--edit\" : \"cb-icon--add\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.titulo);\n        i0.ɵɵadvance(31);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado === 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado !== 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado !== 2);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i5.NgClass, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i5.NgIf],\n    styles: [\".cb-form-field[_ngcontent-%COMP%]{margin-bottom:8px;width:100%}.cb-form-field__input[_ngcontent-%COMP%]{flex-grow:1}.cb-footer[_ngcontent-%COMP%]{width:88%}\"]\n  });\n  return IngresoModificacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}