{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = [\"boton\"];\nconst _c1 = [\"menu\"];\n\nconst _c2 = function (a0) {\n  return {\n    \"visibility\": a0\n  };\n};\n\nconst _c3 = [\"*\"];\nexport let DropdownComponent = /*#__PURE__*/(() => {\n  class DropdownComponent {\n    constructor(elementRef) {\n      this.elementRef = elementRef;\n      this.showMenu = false;\n    }\n\n    ngAfterViewInit() {\n      // query for all li elements in the menu\n      const liElements = this.menuRef.nativeElement.querySelectorAll('li'); // add click listener to each li\n\n      liElements.forEach(li => {\n        li.addEventListener('click', () => {\n          this.showMenu = false;\n        });\n      });\n    }\n\n    toggleContent() {\n      const newShowContent = !this.showMenu;\n\n      if (newShowContent) {\n        const menuWidth = this.menuRef.nativeElement.offsetWidth;\n        const menuHeight = this.menuRef.nativeElement.offsetHeight;\n        const botonRect = this.botonRef.nativeElement.getBoundingClientRect();\n        const botonTop = botonRect.top;\n        const botonLeft = botonRect.left;\n        const windowWidth = window.innerWidth;\n        const windowHeight = window.innerHeight;\n        let newMenuLeft = botonLeft + 20;\n\n        if (botonLeft + menuWidth > windowWidth) {\n          newMenuLeft = botonLeft - menuWidth;\n        }\n\n        let newMenuTop = botonTop + 20;\n\n        if (botonTop + menuHeight > windowHeight) {\n          newMenuTop = botonTop - menuHeight;\n        }\n\n        this.menuRef.nativeElement.style.top = newMenuTop + 'px';\n        this.menuRef.nativeElement.style.left = newMenuLeft + 'px';\n      }\n\n      this.showMenu = newShowContent;\n    }\n\n    onDocumentClick($event) {\n      var _a, _b;\n\n      const clickedInside = (_b = (_a = this.elementRef) === null || _a === void 0 ? void 0 : _a.nativeElement.contains($event.target)) !== null && _b !== void 0 ? _b : false;\n\n      if (!clickedInside) {\n        this.showMenu = false;\n      }\n    }\n\n  }\n\n  DropdownComponent.ɵfac = function DropdownComponent_Factory(t) {\n    return new (t || DropdownComponent)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n\n  DropdownComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DropdownComponent,\n    selectors: [[\"cb-dropdown\"]],\n    viewQuery: function DropdownComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.botonRef = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.menuRef = _t.first);\n      }\n    },\n    hostBindings: function DropdownComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"click\", function DropdownComponent_click_HostBindingHandler($event) {\n          return ctx.onDocumentClick($event);\n        }, false, i0.ɵɵresolveDocument);\n      }\n    },\n    ngContentSelectors: _c3,\n    decls: 6,\n    vars: 3,\n    consts: [[\"id\", \"boton\", \"type\", \"button\", 1, \"cb-btn\", \"cb-btn--only-icon\", 2, \"border\", \"none\", \"background-color\", \"transparent\", \"cursor\", \"pointer\", 3, \"click\"], [\"boton\", \"\"], [1, \"cb-btn__icon\", \"cb-icon\", \"cb-icon--dropdown\"], [\"id\", \"menu\", 3, \"ngStyle\"], [\"menu\", \"\"]],\n    template: function DropdownComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef();\n        i0.ɵɵelementStart(0, \"button\", 0, 1);\n        i0.ɵɵlistener(\"click\", function DropdownComponent_Template_button_click_0_listener() {\n          return ctx.toggleContent();\n        });\n        i0.ɵɵelement(2, \"i\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3, 4);\n        i0.ɵɵprojection(5);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(1, _c2, ctx.showMenu ? \"visible\" : \"hidden\"));\n      }\n    },\n    directives: [i1.NgStyle],\n    styles: [\"#menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:99999;visibility:hidden}#menu[_ngcontent-%COMP%]   .visible[_ngcontent-%COMP%]{visibility:visible}\"]\n  });\n  return DropdownComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}