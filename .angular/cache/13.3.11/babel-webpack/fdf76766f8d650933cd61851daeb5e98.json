{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@cb/core/services/accounts.service\";\nimport * as i3 from \"src/app/shared/components/modal\";\nimport * as i4 from \"src/app/shared/dialogo/services/dialog-service.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction IngresoModificacionComponent_li_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 16)(1, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function IngresoModificacionComponent_li_25_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.closeForm();\n    });\n    i0.ɵɵtext(2, \" Cerrar \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction IngresoModificacionComponent_li_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 16)(1, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function IngresoModificacionComponent_li_26_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.closeForm();\n    });\n    i0.ɵɵtext(2, \" Cancelar \");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction IngresoModificacionComponent_li_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 16)(1, \"button\", 18);\n    i0.ɵɵtext(2, \"Guardar\");\n    i0.ɵɵelementEnd()();\n  }\n}\n/**\r\n * Estados posibles de la pantalla:\r\n * 0 -> Alta,\r\n * 1 -> Modificacion,\r\n * 2 -> Detalle\r\n **/\n\n\nexport var Estado = /*#__PURE__*/(() => {\n  (function (Estado) {\n    Estado[Estado[\"Alta\"] = 0] = \"Alta\";\n    Estado[Estado[\"Modificacion\"] = 1] = \"Modificacion\";\n    Estado[Estado[\"Detalle\"] = 2] = \"Detalle\";\n  })(Estado || (Estado = {}));\n\n  return Estado;\n})();\nexport let IngresoModificacionComponent = /*#__PURE__*/(() => {\n  class IngresoModificacionComponent {\n    constructor(fb, accountService, modalActivoRef, dialogService) {\n      this.fb = fb;\n      this.accountService = accountService;\n      this.modalActivoRef = modalActivoRef;\n      this.dialogService = dialogService;\n      this.estado = Estado.Detalle;\n      this.titulo = '';\n      this.grupoAccount = this.fb.group({\n        accountId: [0],\n        accountBalance: [0],\n        accountType: [],\n        accountCurrency: []\n      });\n    }\n\n    ngOnInit() {\n      if (this.estado !== Estado.Alta) {\n        this.cargarPantalla();\n\n        if (this.estado === Estado.Detalle) {\n          this.grupoAccount.disable();\n        }\n      }\n    }\n\n    onSubmit() {\n      if (this.grupoAccount.valid) {\n        this.account = this.grupoAccount.value;\n\n        if (this.estado === Estado.Alta) {\n          this.accountService.setAccount({\n            account: this.account\n          }).subscribe({\n            next: account => {\n              console.log(account);\n              this.closeForm();\n              const dialogConfig = {\n                title: 'Cuenta creada',\n                message: 'La cuenta se ha creado correctamente',\n                tipo: 'exito',\n                confirmText: 'Aceptar',\n                cancelText: undefined\n              };\n              this.dialogService.open(dialogConfig);\n            },\n            error: error => {\n              console.log(error);\n            }\n          });\n        } else {\n          let dialogConfig = {\n            title: 'Modificar cuenta',\n            message: '¿Está seguro que desea modificar la cuenta seleccionada?',\n            tipo: 'advertencia',\n            confirmText: 'Aceptar',\n            cancelText: 'Cancelar'\n          };\n          this.dialogService.open(dialogConfig).then(aceptar => {\n            this.accountService.updateAccount({\n              account: this.account\n            }).subscribe({\n              next: account => {\n                console.log(account);\n                this.closeForm();\n                dialogConfig = {\n                  title: 'Cuenta modificada',\n                  message: 'La cuenta se ha modificado correctamente',\n                  tipo: 'exito',\n                  confirmText: 'Aceptar',\n                  cancelText: undefined\n                };\n                this.dialogService.open(dialogConfig);\n              },\n              error: error => {\n                console.log(error);\n              }\n            });\n          });\n        }\n      }\n    }\n\n    cargarPantalla() {\n      if (this.account) {\n        this.grupoAccount.patchValue(this.account);\n      }\n    } //Cierro el modal\n\n\n    closeForm() {\n      this.account = null;\n      this.modalActivoRef.cerrar();\n    }\n\n  }\n\n  IngresoModificacionComponent.ɵfac = function IngresoModificacionComponent_Factory(t) {\n    return new (t || IngresoModificacionComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.ModalActivoRef), i0.ɵɵdirectiveInject(i4.DialogService));\n  };\n\n  IngresoModificacionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: IngresoModificacionComponent,\n    selectors: [[\"cb-ingreso-modificacion\"]],\n    decls: 28,\n    vars: 6,\n    consts: [[1, \"cb-main\", 3, \"formGroup\", \"ngSubmit\"], [1, \"cb-header\"], [1, \"cb-btn__icon\", \"cb-icon\", \"cb-header__title\", 2, \"margin-right\", \"0.5rem\", 3, \"ngClass\"], [1, \"cb-header__title\", 2, \"width\", \"100%\", \"text-wrap\", \"nowrap\", \"margin-top\", \"0.1rem\"], [1, \"cb-section\", \"cb-section--form\", \"cb-form\", 2, \"display\", \"flex\", \"flex-direction\", \"column\", \"row-gap\", \"8px\"], [1, \"cb-form__section\", \"form-section\"], [1, \"form-section__content\", 2, \"display\", \"flex\", \"flex-direction\", \"row\", \"flex-wrap\", \"wrap\"], [1, \"cb-form-field\", \"cb-form-field--inline\"], [1, \"cb-form-field__label\"], [\"type\", \"text\", \"formControlName\", \"accountBalance\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"accountType\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [\"type\", \"text\", \"formControlName\", \"accountCurrency\", 1, \"cb-form-field__input\", \"cb-input\", \"cb-input--small\"], [1, \"cb-footer\", \"cb-footer--sticky\"], [1, \"cb-footer__toolbar\", \"cb-toolbar\"], [1, \"cb-toolbar__content-fixed\"], [\"class\", \"cb-toolbar__option\", 4, \"ngIf\"], [1, \"cb-toolbar__option\"], [\"type\", \"button\", 1, \"btn\", \"cb-btn\", \"cb-btn--secondary\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"cb-btn\"]],\n    template: function IngresoModificacionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function IngresoModificacionComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(1, \"header\", 1);\n        i0.ɵɵelement(2, \"i\", 2);\n        i0.ɵɵelementStart(3, \"h1\", 3);\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"section\", 4)(6, \"fieldset\", 5)(7, \"div\", 6)(8, \"div\", 7)(9, \"label\", 8);\n        i0.ɵɵtext(10, \"Balance\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 9);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"div\", 7)(14, \"label\", 8);\n        i0.ɵɵtext(15, \"Tipo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 10);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"div\", 7)(19, \"label\", 8);\n        i0.ɵɵtext(20, \"Moneda\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"input\", 11);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(22, \"footer\", 12)(23, \"div\", 13)(24, \"div\", 14);\n        i0.ɵɵtemplate(25, IngresoModificacionComponent_li_25_Template, 3, 0, \"li\", 15);\n        i0.ɵɵtemplate(26, IngresoModificacionComponent_li_26_Template, 3, 0, \"li\", 15);\n        i0.ɵɵtemplate(27, IngresoModificacionComponent_li_27_Template, 3, 0, \"li\", 15);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.grupoAccount);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.estado === 2 ? \"cb-icon--info\" : ctx.estado === 1 ? \"cb-icon--edit\" : \"cb-icon--add\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.titulo);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado === 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado !== 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.estado !== 2);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i5.NgClass, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i5.NgIf],\n    styles: [\".cb-form-field[_ngcontent-%COMP%]{margin-bottom:8px;width:100%}.cb-form-field__input[_ngcontent-%COMP%]{flex-grow:1}.cb-footer[_ngcontent-%COMP%]{width:88%}\"]\n  });\n  return IngresoModificacionComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}